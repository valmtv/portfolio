"use client"

import { ThemeHeading } from "components/theme-heading"
import { ThemeText } from "components/theme-text"
import { ThemeCard } from "components/theme-card"
import { useTheme } from "contexts/theme-context"
import { getThemeClasses } from "lib/themes"
import { cn } from "lib/utils"
import { Download, Github } from "lucide-react"

export function CVSection() {
  const { theme } = useTheme()
  const classes = getThemeClasses(theme)

  const handleDownloadCV = () => {
    const link = document.createElement("a")
    link.href = "/Valerii_Matviiv.pdf"
    link.download = "Valerii_Matviiv.pdf"
    document.body.appendChild(link)
    link.click()
    document.body.removeChild(link)
  }

  const frontendSkills = [
    "React",
    "TypeScript",
    "JavaScript",
    "Tailwind CSS",
    "Styled Components",
    "Component Libraries",
  ]
  const backendSkills = ["Node.js", "Express.js", "SQL", "MySQL", "PostgreSQL", "RESTful APIs"]
  const toolsSkills = ["Git", "Docker", "Webpack", "Figma", "Cypress", "Algorithms", "Data Structures"]

  const studentTestingTech = ["React", "React Router", "Tailwind CSS", "Shadcn/ui", "Vite"]
  const taskFlowTech = ["React", "MUI", "Node.js", "Express.js", "MySQL", "JWT", "Google API", "Swagger"]

  return (
    <section className="mb-16 md:mb-24">
      <ThemeHeading level={2} className="mb-8">
        Curriculum Vitae
      </ThemeHeading>

      <div className="space-y-6">
        {/* Professional Summary */}
        <ThemeCard className="max-w-4xl">
          <div className="flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-6">
            <ThemeHeading level={4}>Professional Summary</ThemeHeading>
            <button
              onClick={handleDownloadCV}
              className={cn(
                "px-6 py-3 flex items-center gap-2 justify-center whitespace-nowrap",
                "bg-theme-accent text-theme-accentForeground border-theme-border",
                classes.button,
                classes.transition,
                "hover:-translate-y-1"
              )}
            >
              <Download size={18} />
              <span>Download CV</span>
            </button>
          </div>

          <ThemeText muted className="mb-6">
            Computer Science student at AGH University of Krak√≥w (GPA: 4.82/5) with a strong foundation in core
            CS disciplines such as algorithms, data structures, operating systems, and databases. Proficient in
            front-end and back-end development, combining a solid understanding of UX/UI best practices with
            knowledge of server-side logic, data flow, and RESTful architecture. Eager to apply problem-solving
            skills and continuously learn new technologies to become more adaptable and confident in both skills
            and knowledge.
          </ThemeText>

          <ThemeText muted>
            Experienced with React and its ecosystem, including React Router, Styled Components, and Tailwind
            CSS, for building modular and accessible UIs. Comfortable working with Express.js, implementing
            RESTful APIs, handling JWT-based authentication flows, and integrating external services such as
            Google OAuth and mailing. Confident in managing relational databases like MySQL and PostgreSQL with
            raw SQL. Skilled in using Git, Docker, and working in Unix-based environments.
          </ThemeText>
        </ThemeCard>

        {/* Technical Skills */}
        <ThemeCard className="max-w-4xl">
          <ThemeHeading level={4} className="mb-6">
            Technical Skills
          </ThemeHeading>

          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {/* Frontend Skills */}
            <div>
              <h5 className="text-sm font-semibold mb-3 text-theme-cardForeground">Frontend</h5>
              <div className="flex flex-wrap gap-2">
                {frontendSkills.map((skill) => (
                  <span
                    key={skill}
                    className="px-2 py-1 text-xs bg-theme-secondary text-theme-secondaryForeground border border-theme-border"
                  >
                    {skill}
                  </span>
                ))}
              </div>
            </div>

            {/* Backend Skills */}
            <div>
              <h5 className="text-sm font-semibold mb-3 text-theme-cardForeground">Backend & Database</h5>
              <div className="flex flex-wrap gap-2">
                {backendSkills.map((skill) => (
                  <span
                    key={skill}
                    className="px-2 py-1 text-xs bg-theme-secondary text-theme-secondaryForeground border border-theme-border"
                  >
                    {skill}
                  </span>
                ))}
              </div>
            </div>

            {/* Tools Skills */}
            <div>
              <h5 className="text-sm font-semibold mb-3 text-theme-cardForeground">Tools & Other</h5>
              <div className="flex flex-wrap gap-2">
                {toolsSkills.map((skill) => (
                  <span
                    key={skill}
                    className="px-2 py-1 text-xs bg-theme-secondary text-theme-secondaryForeground border border-theme-border"
                  >
                    {skill}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </ThemeCard>

        {/* Main Projects */}
        <ThemeCard className="max-w-4xl">
          <ThemeHeading level={4} className="mb-6">
            Main Projects
          </ThemeHeading>

          <div className="space-y-6">
            {/* Student Testing Platform */}
            <div>
              <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-3">
                <div className="flex items-center gap-2 flex-wrap">
                  <h5 className="text-lg font-semibold text-theme-foreground">Student Testing Platform</h5>
                  <a
                    href="https://github.com/valmtv"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="inline-flex items-center gap-1 text-sm hover:underline text-theme-accent"
                  >
                    <Github size={14} />
                    GitHub
                  </a>
                </div>
                <ThemeText muted className="text-sm whitespace-nowrap">
                  April 2025 - June 2025
                </ThemeText>
              </div>

              <ThemeText muted className="mb-3">
                Built a web app enabling instructors to create and assign online exams from customizable question
                collections (public, private, archived) and students to take and review them. I led the frontend
                team - mentoring two new programmers and implementing a robust Git workflow with PR reviews to
                ensure stability - and architected user-friendly views (authentication flows, collection/exam
                management, exam-taking and review). I also developed reusable components like debounced password
                inputs, a combined date-time picker, and pagination, and set up dynamic client-side routing to
                keep navigation clear without global state.
              </ThemeText>

              <div className="flex flex-wrap gap-2">
                {studentTestingTech.map((tech) => (
                  <span
                    key={tech}
                    className="px-2 py-1 text-xs font-medium bg-theme-accent text-theme-accentForeground opacity-90"
                  >
                    {tech}
                  </span>
                ))}
              </div>
            </div>

            {/* TaskFlow Manager */}
            <div className="border-t pt-6 border-theme-border">
              <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-3">
                <div className="flex items-center gap-2 flex-wrap">
                  <h5 className="text-lg font-semibold text-theme-foreground">TaskFlow Manager</h5>
                  <a
                    href="https://github.com/valmtv"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="inline-flex items-center gap-1 text-sm hover:underline text-theme-accent"
                  >
                    <Github size={14} />
                    GitHub
                  </a>
                </div>
                <ThemeText muted className="text-sm whitespace-nowrap">
                  Jan 2025 - March 2025
                </ThemeText>
              </div>

              <ThemeText muted className="mb-3">
                Full-stack web application for task management, featuring task creation, assignment, and user
                profile handling with email confirmation. Implemented JWT authentication with optional Google
                OAuth, designed and built frontend components, integrated Express.js APIs, and authored all
                database interactions using raw SQL (no ORM per course requirements).
              </ThemeText>

              <div className="flex flex-wrap gap-2">
                {taskFlowTech.map((tech) => (
                  <span
                    key={tech}
                    className="px-2 py-1 text-xs font-medium bg-theme-accent text-theme-accentForeground opacity-90"
                  >
                    {tech}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </ThemeCard>

        {/* Education & Awards */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl">
          <ThemeCard>
            <ThemeHeading level={4} className="mb-4">
              Education
            </ThemeHeading>
            <div className="space-y-4">
              <div>
                <h5 className="text-lg font-semibold mb-1 text-theme-foreground">AGH University of Krak√≥w</h5>
                <ThemeText className="text-sm mb-1">Bachelor of Computer Science</ThemeText>
                <ThemeText muted className="text-xs mb-1">
                  Oct 2023 - Feb 2027
                </ThemeText>
                <ThemeText muted className="text-xs">
                  GPA: 4.82/5
                </ThemeText>
              </div>
              <div>
                <h5 className="text-lg font-semibold mb-1 text-theme-foreground">
                  NOVA School of Science and Technology
                </h5>
                <ThemeText className="text-sm mb-1">Erasmus Exchange Program</ThemeText>
                <ThemeText muted className="text-xs mb-1">
                  Sep 2025 - Jan 2026
                </ThemeText>
                <ThemeText muted className="text-xs">
                  Lisbon, Portugal
                </ThemeText>
              </div>
            </div>
          </ThemeCard>

          <ThemeCard>
            <ThemeHeading level={4} className="mb-4">
              Awards & Certificates
            </ThemeHeading>
            <div className="space-y-2">
              <ThemeText className="text-sm">‚Ä¢ Rector&apos;s Scholarship at AGH University of Krak√≥w</ThemeText>
              <ThemeText className="text-sm">‚Ä¢ Principles of UI/UX Design</ThemeText>
              <ThemeText className="text-sm">‚Ä¢ Developing Back-End Apps with Node.js and Express</ThemeText>
              <ThemeText className="text-sm">‚Ä¢ Participation in Deployed&apos;s Frontend Workshop</ThemeText>
            </div>
          </ThemeCard>
        </div>

        {/* Languages */}
        <ThemeCard className="max-w-4xl">
          <ThemeHeading level={4} className="mb-4">
            Languages
          </ThemeHeading>
          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
            <div>
              <ThemeText className="text-sm font-semibold">Ukrainian</ThemeText>
              <ThemeText muted className="text-xs">Native</ThemeText>
            </div>
            <div>
              <ThemeText className="text-sm font-semibold">English</ThemeText>
              <ThemeText muted className="text-xs">Fluent</ThemeText>
            </div>
            <div>
              <ThemeText className="text-sm font-semibold">Polish</ThemeText>
              <ThemeText muted className="text-xs">Intermediate</ThemeText>
            </div>
            <div>
              <ThemeText className="text-sm font-semibold">German</ThemeText>
              <ThemeText muted className="text-xs">Intermediate <br />(out of practice)</ThemeText>
            </div>
          </div>
        </ThemeCard>
      </div>
    </section>
  )
}